plugins {
	id 'java'
	id 'com.github.johnrengelman.shadow' version '7.1.2'
}

group = 'com.attackcounter'
version = '1.0'

repositories {
	mavenLocal()
	maven {
		url = 'https://repo.runelite.net'
		content {
			includeGroupByRegex("net\\.runelite.*")
		}
	}
	mavenCentral()
}

def runeLiteVersion = '1.11.6.1'

dependencies {
	compileOnly "net.runelite:client:$runeLiteVersion"
	compileOnly 'org.projectlombok:lombok:1.18.30'
	annotationProcessor 'org.projectlombok:lombok:1.18.30'

	testImplementation "junit:junit:4.13.2"
}

java {
	toolchain {
		languageVersion.set(JavaLanguageVersion.of(11))
	}
}

tasks.withType(JavaCompile).configureEach {
	options.encoding = 'UTF-8'
}

tasks.withType(Test).configureEach {
	enabled = false
}

tasks.withType(JavaCompile).configureEach {
	if (name == "compileTestJava") {
		enabled = false
	}
}

shadowJar {
	archiveClassifier.set('all')
	archiveBaseName.set('hit-counter')
	manifest {
		attributes 'Main-Class': 'net.runelite.client.RuneLite'
	}
	mergeServiceFiles()
	exclude 'META-INF/*.SF', 'META-INF/*.DSA', 'META-INF/*.RSA'
}